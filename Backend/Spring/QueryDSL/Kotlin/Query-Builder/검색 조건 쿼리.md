## π’΅κ²€μƒ‰ μ΅°κ±΄ μΏΌλ¦¬

κ²€μƒ‰ μ΅°κ±΄μ€ .and() & .or() λ©”μ„λ“ μ²΄μΈμΌλ΅ μ—°κ²°ν•μ—¬ μ΅°κ±΄μ„ μ¶”κ°€ν•  μ μλ‹¤.

```kotlin
@SpringBootTest  
@Transactional  
class SearchTest @Autowired constructor(  
    @PersistenceContext  
    val em: EntityManager,  
    val queryFactory: JPAQueryFactory  
) {  
  
    /** @desc κΈ°λ³Έ κ²€μƒ‰ μΏΌλ¦¬ */    
    @Test  
    fun search() {  
        val m: QMember = QMember("m")  
  
        val findMember = queryFactory  
            .selectFrom(m)  
            .where(m.name.eq("member1").and(m.age.eq(10)))  
            .fetchOne()  
  
        assertThat(findMember?.name).isEqualTo("member1")  
  
        m.name.eq("member1")  
        m.name.ne("member2")  
        m.name.eq("member1").not()  
  
        m.name.isNotNull  
  
        m.age.`in`(10, 20)  
        m.age.notIn(10, 20)  
        m.age.between(10, 30)  
  
        m.age.goe(30) // age >= 30  
        m.age.gt(30) // age > 30  
        m.age.loe(30) // age <= 30  
        m.age.lt(30) // age < 30  
  
        m.name.like("member%") // like κ²€μƒ‰  
        m.name.contains("member") // like %member% κ²€μƒ‰  
        m.name.startsWith("member") // like member% κ²€μƒ‰  
    }  
  
    /** @desc And μ΅°κ±΄μ„ νλΌλ―Έν„°λ΅ μ²λ¦¬ */    
    @Test  
    fun searchAndParam() {  
        val m: QMember = QMember("m")  
  
        val result: List<Member> = queryFactory  
            .selectFrom(m)  
            .where(m.name.eq("member1"))  
            .fetch()  
  
        assertThat(result.size).isEqualTo(1)  
  
        //List  
        val fetch: List<Member> = queryFactory  
            .selectFrom(m)  
            .fetch()  
  
        //λ‹¨ κ±΄  
        val findMember1: Member? = queryFactory  
            .selectFrom(m)  
            .fetchOne()  
  
        //μ²μ ν• κ±΄ μ΅°ν  
        val (id, name, age, team) = queryFactory  
            .selectFrom(m)  
            .fetchFirst()  
  
        //νμ΄μ§•μ—μ„ μ‚¬μ©  
        val results: QueryResults<Member> = queryFactory  
            .selectFrom(m)  
            .fetchResults()  
          
        //count μΏΌλ¦¬λ΅ λ³€κ²½  
        val count = queryFactory  
            .selectFrom(m)  
            .fetchCount()  
    }  
}
```

---

## JPQLμ΄ μ κ³µν•λ” λ¨λ“  κ²€μƒ‰ μ΅°κ±΄

`and`Β λ©”μ„λ“:
    -   κΈ°λ¥: λ‘ κ°μ μ΅°κ±΄μ„ AND μ—°μ‚°μΌλ΅ κ²°ν•©ν•©λ‹λ‹¤.
    -   μ‚¬μ© μμ‹:Β `builder.and(condition1)`

<br>

`or`Β λ©”μ„λ“:
    -   κΈ°λ¥: λ‘ κ°μ μ΅°κ±΄μ„ OR μ—°μ‚°μΌλ΅ κ²°ν•©ν•©λ‹λ‹¤.
    -   μ‚¬μ© μμ‹:Β `builder.or(condition1)`

<br>

`not`Β λ©”μ„λ“:
    -   κΈ°λ¥: μ΅°κ±΄μ„ λ¶€μ •ν•©λ‹λ‹¤.
    -   μ‚¬μ© μμ‹:Β `builder.not(condition)`

<br>

`value`Β λ©”μ„λ“:
    -   κΈ°λ¥:Β `BooleanBuilder`Β κ°μ²΄λ¥Ό λ¶λ¦¬μ–Έ μ΅°κ±΄μΌλ΅ λ³€ν™ν•©λ‹λ‹¤.
    -   μ‚¬μ© μμ‹:Β `val condition = builder.value`

<br>

`isNull`Β λ©”μ„λ“:
    -   κΈ°λ¥: μ£Όμ–΄μ§„ ν•„λ“κ°€ NULLμΈμ§€ ν™•μΈν•λ” μ΅°κ±΄μ„ μ¶”κ°€ν•©λ‹λ‹¤.
    -   μ‚¬μ© μμ‹:Β `builder.isNull(field)`

<br>

`isNotNull`Β λ©”μ„λ“:
    -   κΈ°λ¥: μ£Όμ–΄μ§„ ν•„λ“κ°€ NULLμ΄ μ•„λ‹μ§€ ν™•μΈν•λ” μ΅°κ±΄μ„ μ¶”κ°€ν•©λ‹λ‹¤.
    -   μ‚¬μ© μμ‹:Β `builder.isNotNull(field)`

<br>

`eq`Β λ©”μ„λ“:
    -   κΈ°λ¥: μ£Όμ–΄μ§„ ν•„λ“μ™€ κ°’μ΄ κ°™μ€μ§€ ν™•μΈν•λ” μ΅°κ±΄μ„ μ¶”κ°€ν•©λ‹λ‹¤.
    -   μ‚¬μ© μμ‹:Β `builder.eq(field, value)`

<br>

`ne`Β λ©”μ„λ“:
    -   κΈ°λ¥: μ£Όμ–΄μ§„ ν•„λ“μ™€ κ°’μ΄ λ‹¤λ¥Έμ§€ ν™•μΈν•λ” μ΅°κ±΄μ„ μ¶”κ°€ν•©λ‹λ‹¤.
    -   μ‚¬μ© μμ‹:Β `builder.ne(field, value)`

<br>

`gt`Β λ©”μ„λ“:
    -   κΈ°λ¥: μ£Όμ–΄μ§„ ν•„λ“κ°€ μ£Όμ–΄μ§„ κ°’λ³΄λ‹¤ ν°μ§€ ν™•μΈν•λ” μ΅°κ±΄μ„ μ¶”κ°€ν•©λ‹λ‹¤.
    -   μ‚¬μ© μμ‹:Β `builder.gt(field, value)`

<br>

`lt`Β λ©”μ„λ“:
    -   κΈ°λ¥: μ£Όμ–΄μ§„ ν•„λ“κ°€ μ£Όμ–΄μ§„ κ°’λ³΄λ‹¤ μ‘μ€μ§€ ν™•μΈν•λ” μ΅°κ±΄μ„ μ¶”κ°€ν•©λ‹λ‹¤.
    -   μ‚¬μ© μμ‹:Β `builder.lt(field, value)`

<br>

`goe`Β λ©”μ„λ“:
    -   κΈ°λ¥: μ£Όμ–΄μ§„ ν•„λ“κ°€ μ£Όμ–΄μ§„ κ°’λ³΄λ‹¤ ν¬κ±°λ‚ κ°™μ€μ§€ ν™•μΈν•λ” μ΅°κ±΄μ„ μ¶”κ°€ν•©λ‹λ‹¤.
    -   μ‚¬μ© μμ‹:Β `builder.goe(field, value)`

<br>

`loe`Β λ©”μ„λ“:
    -   κΈ°λ¥: μ£Όμ–΄μ§„ ν•„λ“κ°€ μ£Όμ–΄μ§„ κ°’λ³΄λ‹¤ μ‘κ±°λ‚ κ°™μ€μ§€ ν™•μΈν•λ” μ΅°κ±΄μ„ μ¶”κ°€ν•©λ‹λ‹¤.
    -   μ‚¬μ© μμ‹:Β `builder.loe(field, value)`

<br>

```kotlin
m.name.eq("member1")  
m.name.ne("member2")  
m.name.eq("member1").not()  
  
m.name.isNotNull  
  
m.age.`in`(10, 20)  
m.age.notIn(10, 20)  
m.age.between(10, 30)  
  
m.age.goe(30) // age >= 30  
m.age.gt(30) // age > 30  
m.age.loe(30) // age <= 30  
m.age.lt(30) // age < 30  
  
m.name.like("member%") // like κ²€μƒ‰  
m.name.contains("member") // like %member% κ²€μƒ‰  
m.name.startsWith("member") // like member% κ²€μƒ‰
```

---

## And μ΅°κ±΄μ„ νλΌλ―Έν„°λ΅ μ²λ¦¬

where()μ— νλΌλ―Έν„°λ΅ κ²€μƒ‰μ΅°κ±΄μ„ μ¶”κ°€ν•λ©΄ AND μ΅°κ±΄μ΄ μ¶”κ°€λλ‹¤.
μ΄κ²½μ° `null`κ°’μ€ λ¬΄μ‹ -> λ©”μ„λ“ μ¶”μ¶μ„ ν™μ©ν•΄ λ™μ  μΏΌλ¦¬λ¥΄ κΉ”λ”ν•κ² λ§λ“¤μ μλ‹¤.

```kotlin
/** @desc And μ΅°κ±΄μ„ νλΌλ―Έν„°λ΅ μ²λ¦¬ */
@Test  
fun searchAndParam() {  
    val m: QMember = QMember("m")  
  
    val result: List<Member> = queryFactory  
        .selectFrom(m)  
        .where(m.name.eq("member1"))  
        .fetch()  
  
    assertThat(result.size).isEqualTo(1)  
}
```

---

## κ²°κ³Ό μ΅°ν

`fetch()` : λ¦¬μ¤νΈ μ΅°ν

`fetchOne()` : λ‹¨κ±΄ μ΅°ν
- κ²°κ³Όκ°€ μ—†μΌλ©΄ Null
- κ²°κ³Όκ°€ λ‘ μ΄μƒμ΄λ©΄ NonUniqueResultException λ°μƒ

`fetchFirst()` : limit(1).fetchOne()

`fetchResults()` : νμ΄μ§• μ •λ³΄ ν¬ν•¨, total count μΏΌλ¦¬ μ¶”κ°€ μ‹¤ν–‰

`fetchCount()` : Count μΏΌλ¦¬λ΅ λ³€κ²½ν•΄μ„ count μ μ΅°ν

```kotlin
/** @desc And μ΅°κ±΄μ„ νλΌλ―Έν„°λ΅ μ²λ¦¬ */
@Test  
fun searchAndParam() {  
    val m: QMember = QMember("m")  
  
    val result: List<Member> = queryFactory  
        .selectFrom(m)  
        .where(m.name.eq("member1"))  
        .fetch()  
  
    assertThat(result.size).isEqualTo(1)  
  
    //List  
    val fetch: List<Member> = queryFactory  
        .selectFrom(m)  
        .fetch()  
  
    //λ‹¨ κ±΄  
    val findMember1: Member? = queryFactory  
        .selectFrom(m)  
        .fetchOne()  
  
    //μ²μ ν• κ±΄ μ΅°ν  
    val (id, name, age, team) = queryFactory  
        .selectFrom(m)  
        .fetchFirst()  
  
    //νμ΄μ§•μ—μ„ μ‚¬μ©  
    val results: QueryResults<Member> = queryFactory  
        .selectFrom(m)  
        .fetchResults()  
  
    //count μΏΌλ¦¬λ΅ λ³€κ²½  
    val count = queryFactory  
        .selectFrom(m)  
        .fetchCount()  
}
```